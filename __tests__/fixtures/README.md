# å•å…ƒæµ‹è¯•æ•°æ®è¯´æ˜

## ğŸ“ ç›®å½•ç»“æ„

```
__tests__/fixtures/
â”œâ”€â”€ coordinates/
â”‚   â”œâ”€â”€ beijing_olympic_park.json    # åŒ—äº¬å¥¥æ—åŒ¹å…‹æ£®æ—å…¬å›­çœŸå®è½¨è¿¹
â”‚   â”œâ”€â”€ mountain_climb.json          # 45åº¦é™¡å¡çˆ¬å±±åœºæ™¯
â”‚   â”œâ”€â”€ flat_road.json               # å¹³è·¯åœºæ™¯ï¼ˆæ— æµ·æ‹”å˜åŒ–ï¼‰
â”‚   â””â”€â”€ invalid_coordinates.json     # æ— æ•ˆåæ ‡æµ‹è¯•æ•°æ®
```

## ğŸ“ æµ‹è¯•æ•°æ®æ¥æº

### 1. åŒ—äº¬å¥¥æ—åŒ¹å…‹æ£®æ—å…¬å›­ (`beijing_olympic_park.json`)

- **ç±»å‹**: çœŸå®åœ°å›¾åæ ‡
- **è·ç¦»**: çº¦ 5.02kmï¼ˆç¯å½¢è·‘é“ï¼‰
- **æµ·æ‹”å˜åŒ–**: 12mï¼ˆç›¸å¯¹å¹³å¦ï¼‰
- **ç‚¹æ•°**: 20 ä¸ªè½¨è¿¹ç‚¹
- **ç”¨é€”**: æµ‹è¯•å¸¸è§„è·‘æ­¥åœºæ™¯ï¼ŒéªŒè¯è·ç¦»è®¡ç®—ç²¾åº¦
- **é¢„æœŸ**: æ€»è·ç¦» 5020m Â± 2%

### 2. 45åº¦é™¡å¡çˆ¬å±± (`mountain_climb.json`)

- **ç±»å‹**: æ•°å­¦æ¨¡å‹ç”Ÿæˆ
- **æ°´å¹³è·ç¦»**: 1000m
- **æµ·æ‹”çˆ¬å‡**: 1000m
- **å¡åº¦**: 45Â°
- **ç†è®º3Dè·ç¦»**: 1414.21mï¼ˆâˆš(1000Â² + 1000Â²)ï¼‰
- **ç‚¹æ•°**: 11 ä¸ªè½¨è¿¹ç‚¹
- **ç”¨é€”**: éªŒè¯3Dè·ç¦»è®¡ç®—å‡†ç¡®æ€§
- **é¢„æœŸ**: æ€»è·ç¦» 1414.21m Â± 1%

### 3. å¹³è·¯åœºæ™¯ (`flat_road.json`)

- **ç±»å‹**: æ•°å­¦æ¨¡å‹ç”Ÿæˆ
- **è·ç¦»**: 1000m
- **æµ·æ‹”å˜åŒ–**: 0m
- **ç”¨é€”**: éªŒè¯æ— æµ·æ‹”æ—¶é€€åŒ–ä¸ºå¹³é¢è·ç¦»
- **é¢„æœŸ**: 3Dè·ç¦» = å¹³é¢è·ç¦» = 1000m

### 4. æ— æ•ˆåæ ‡ (`invalid_coordinates.json`)

- **ç±»å‹**: è¾¹ç•Œæµ‹è¯•æ•°æ®
- **åŒ…å«**: è¶…èŒƒå›´ã€NaNã€nullã€undefinedã€å­—ç¬¦ä¸²ç­‰
- **ç”¨é€”**: æµ‹è¯•åæ ‡éªŒè¯å‡½æ•°çš„å¥å£®æ€§

## ğŸ§ª æµ‹è¯•è¦†ç›–

### distance3D-test.ts

- âœ… å¹³é¢è·ç¦»è®¡ç®—ï¼ˆæ— æµ·æ‹”ï¼‰
- âœ… 3Dè·ç¦»è®¡ç®—ï¼ˆæœ‰æµ·æ‹”ï¼‰
- âœ… æµ·æ‹”ç¼ºå¤±å¤„ç†
- âœ… å¼‚å¸¸å€¼è¿‡æ»¤ï¼ˆ<0.5m, >15mï¼‰
- âœ… ç´¯è®¡çˆ¬å‡/ä¸‹é™è®¡ç®—
- âœ… è¾¹ç•Œæƒ…å†µå¤„ç†

### coordinates-test.ts

- âœ… æœ‰æ•ˆåæ ‡éªŒè¯
- âœ… æ— æ•ˆåæ ‡è¿‡æ»¤
- âœ… TrackPointè½¬æ¢
- âœ… 3Dåæ ‡è½¬æ¢
- âœ… æ‰¹é‡è½¬æ¢
- âœ… è¾¹ç•Œå€¼å¤„ç†

## ğŸ¯ é¢„æœŸæµ‹è¯•è¦†ç›–ç‡

| æ¨¡å—           | ç›®æ ‡è¦†ç›–ç‡ |
| -------------- | ---------- |
| distance3D.ts  | 95%+       |
| coordinates.ts | 90%+       |

## ğŸ“ è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
npx jest __tests__/utils/distance3D-test.ts
npx jest __tests__/utils/coordinates-test.ts

# æŸ¥çœ‹è¦†ç›–ç‡æŠ¥å‘Š
npx jest --coverage
```

## ğŸ”„ æ•°æ®æ›´æ–°

å¦‚éœ€æ·»åŠ æ–°çš„æµ‹è¯•åœºæ™¯ï¼š

1. åœ¨ `fixtures/coordinates/` åˆ›å»ºæ–°çš„ JSON æ–‡ä»¶
2. éµå¾ªç°æœ‰æ•°æ®ç»“æ„ï¼ˆmetadata + pointsï¼‰
3. æ›´æ–°æ­¤æ–‡æ¡£è¯´æ˜
4. æ·»åŠ å¯¹åº”çš„æµ‹è¯•ç”¨ä¾‹
