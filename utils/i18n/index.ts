import i18n from "i18next";
import { initReactI18next } from "react-i18next";
import { getStorageItemAsync, setStorageItemAsync } from "@/hooks/useStorageState";

// è®¾ç½®å­˜å‚¨ keyï¼ˆä¸ settingsStore ä¿æŒä¸€è‡´ï¼‰
const SETTINGS_STORAGE_KEY = "app-settings";

const resources = {
  en: {
    translation: {
      common: {
        today: "Today",
        yesterday: "Yesterday",
        time: "Time",
        error: "Error",
        cancel: "Cancel",
        saving: "Saving...",
        save: "Save",
        loading: "Loading",
        back: "Back",
        optional: "Optional",
        success: "Success",
        greeting: {
          morning: "Good morning",
          afternoon: "Good afternoon",
          evening: "Good evening",
        },
      },
      tabs: {
        index: "Home",
        history: "History",
        charts: "Stats",
        user: "User",
      },
      weather: {
        sunny: "Sunny",
        cloudy: "Cloudy",
        overcast: "Overcast",
        comfortable: "Comfortable",
        breezy: "Breezy",
        windy: "Windy",
        hot: "Hot",
        cold: "Cold",
        warm: "Warm",
        cool: "Cool",
        humid: "Humid",
        dry: "Dry",
        hazy: "Hazy",
        foggy: "Foggy",
        showery: "Showery",
        stormy: "Stormy",
        mild: "Mild",
        fresh: "Fresh",
      },
      login: {
        title: "Login here",
        registerTitle: "Create Account",
        registerDescription:
          "Create an account so you can explore all the existing jobs",
        welcome: "Welcome back you've been missed!",
        forgetPassword: "Forgot your password?",
        account: "Account",
        password: "Password",
        confirmPassword: "Confirm Password",
        createAccount: "Create new account",
        haveAccount: "Already have an account",
        continue: "Or continue with",
        login: "Sign in",
        register: "Sign up",
        confirmPasswordError: "The two passwords do not match",
      },
      home: {
        todayActivity: "Today's Activity",
        completeness: "Completeness",
        duration: "Duration",
        calories: "Calories",
        pace: "Average pace",
        stepFrequency: "Step frequency",
        totalDistance: "Total Distance",
        totalHours: "Total Hours",
        totalRuns: "Total Runs",
        startRun: "Start Run!",
        career: "Career Stats",
        recentActivities: "Recent Activities",
        showMore: "More",
      },
      charts: {
        title: "Activity Stats",
        sinceDate: "Since",
        weeklyDistance: "Distance",
        totalCalories: "Calories",
        avgPace: "Avg Pace",
        weekly: "Weekly",
        monthly: "Monthly",
        yearly: "Yearly",
        dailyDistance: "Daily Distance (km)",
        weeklyTrend: "Weekly Trend",
        dailyCalories: "Daily Calories (kcal)",
        caloriesBurned: "Calories Burned",
      },
      history: {
        outdoorRun: "Outdoor Run",
        noRecords: "No records yet",
        emptyTitle: "No Running Records Yet",
        emptySubtitle: "Take your first step and start recording every run! ğŸƒâ€â™‚ï¸",
        startRun: "Start First Run",
      },
      emptyState: {
        title: "No Running Records Yet",
        subtitle: "Take your first step and start recording every run! ğŸƒâ€â™‚ï¸",
        feature1: "Record running routes",
        feature2: "Track personal progress",
        feature3: "Analyze workout data",
        action: "Start First Run",
      },
      run: {
        summary: "Run Summary",
        detail: "Run Detail",
        start: "Start",
        finish: "Finish",
        pause: "Pause",
        resume: "Resume",
        paused: "Paused",
        discard: "Discard",
        discardTitle: "Discard Run?",
        discardMessage: "This run will not be saved. Are you sure?",
        discardRecord: "Discard Record",
        saveRecord: "Save Record",
        editInfo: "Edit Info",
        info: "Run Info",
        addNote: "Add a note...",
        noNote: "No note",
        duration: "Duration",
        steps: "Steps",
        signal: "Signal",
        notFound: "Run record not found",
        exportTitle: "Export Run Data",
        exportMessage: "Choose export format",
        exportError: "Failed to export run data, please try again",
      },
      setting: {
        language: "Language",
        darkMode: "DarkMode",
        editProfile: "Edit Profile",
        cloudSync: "Cloud Sync",
        cloudSyncValue: "iCloud",
        map: "Map Settings",
        notify: "Notification",
        helps: "Help and Feedback",
        about: "About Us",
        logout: "Log out",
        preferences: "Preferences",
        tools: "Running Tools",
        other: "Others",
      },
      cloudSync: {
        title: "Cloud Sync",
        syncing: "Syncing...",
        restoring: "Restoring...",
        syncSuccess: "Sync Success",
        syncFailed: "Sync Failed",
        synced: "Synced",
        notSynced: "Not Synced",
        lastSync: "Last Sync",
        backupTime: "Backup Time",
        upload: "Backup Now",
        restore: "Restore",
        restoreTitle: "Restore Data",
        restoreConfirm: "This will overwrite all data on this device with the cloud backup. Continue?",
        restoreSuccess: "Restore Success",
        restoreSuccessMessage: "Data has been restored. Please restart the app to apply changes.",
        syncSettings: "Sync Settings",
        autoSync: "Auto Sync",
        autoSyncDesc: "Backup after each run",
        wifiOnly: "WiFi Only",
        wifiOnlyDesc: "Save mobile data",
        storageInfo: "Storage Info",
        databaseSize: "Database Size",
        backupSize: "Backup Size",
        cloudProvider: "Cloud Provider",
        tips: "Backups are stored in iCloud and can be restored when switching devices. iCloud backup usually happens automatically when the device is charging and connected to WiFi.",
      },
      mapSettings: {
        title: "Map Settings",
        mapTypeTitle: "Map Type",
        mapType: {
          standard: "Standard",
          satellite: "Satellite",
          hybrid: "Hybrid",
        },
        displayOptions: "Display Options",
        showUserLocation: "Show My Location",
        showUserLocationDesc: "Show your position on the map",
        followUserLocation: "Follow Location",
        followUserLocationDesc: "Map automatically follows your movement",
        showCompass: "Show Compass",
        showCompassDesc: "Show direction on the map",
        showScale: "Show Scale",
        showScaleDesc: "Show map scale indicator",
        tiltEnabled: "3D Tilt View",
        tiltEnabledDesc: "Enable tilted map view (45 degrees)",
        showTraffic: "Show Traffic",
        showTrafficDesc: "Display real-time traffic information",
        showPOI: "Show Points of Interest",
        showPOIDesc: "Show shops, restaurants and other places",
        interaction: "Interaction",
        zoomEnabled: "Allow Zoom",
        zoomEnabledDesc: "Pinch to zoom the map",
        rotateEnabled: "Allow Rotation",
        rotateEnabledDesc: "Two-finger rotate the map",
        scrollEnabled: "Allow Pan",
        scrollEnabledDesc: "Drag to move the map",
        pitchEnabled: "Allow Tilt",
        pitchEnabledDesc: "Two-finger slide to change tilt",
        pathStyle: "Path Style",
        pathColorTitle: "Path Color",
        pathColor: {
          blue: "Blue",
          red: "Red",
          green: "Green",
          orange: "Orange",
          purple: "Purple",
        },
        pathWidthTitle: "Path Width",
        pathWidth: {
          2: "Thin",
          4: "Normal",
          6: "Thick",
          8: "Extra Thick",
        },
        other: "Other",
        reset: "Reset to Default",
        tips: "These settings will affect the map display during your run",
      },
      about: {
        title: "About Us",
        slogan: "Your Best Running Companion",
        versionInfo: "Version Info",
        version: "Version",
        buildNumber: "Build Number",
        updateCheck: "Check for Updates",
        legal: "Legal",
        privacyPolicy: "Privacy Policy",
        termsOfService: "Terms of Service",
        openSource: "Open Source Licenses",
        team: "About SimRun",
        description:
          "SimRun is a professional running tracking app designed for runners who love outdoor sports. We are committed to providing accurate trajectory recording and detailed data analysis to help you better understand your running performance.",
        allRightsReserved: "All rights reserved.",
      },
      help: {
        title: "Help & Feedback",
        quickActions: "Quick Actions",
        contactUs: "Contact Us",
        userGuide: "User Guide",
        userGuideDesc: "Learn how to use SimRun",
        faq: {
          title: "Frequently Asked Questions",
          gps: {
            question: "Why is my GPS trajectory inaccurate?",
            answer:
              "GPS accuracy is affected by environmental factors. Please run in open areas and avoid tall buildings or dense tree cover. You can also try turning GPS off and on again, or restarting your phone.",
          },
          background: {
            question: "Can I record in the background?",
            answer:
              'Yes, SimRun supports background recording. Please allow location permission "Always" in settings to ensure continuous tracking when the screen is locked.',
          },
          battery: {
            question: "Will recording consume a lot of battery?",
            answer:
              "GPS recording does consume battery. It is recommended to fully charge before long runs or enable battery saver mode. We have optimized battery usage as much as possible.",
          },
          export: {
            question: "How to export running data?",
            answer:
              "Go to Run History, select a record, click the share button to export GPX file, which can be imported into other sports apps.",
          },
        },
        feedback: {
          title: "Send Feedback",
          desc: "Encountered a problem or have a suggestion? Let us know!",
          email: "Your Email",
          content: "Feedback Content",
          placeholder:
            "Please describe your problem or suggestion in detail...",
          submit: "Submit Feedback",
        },
        feedbackEmpty: "Please enter feedback content",
        feedbackSent:
          "Thank you for your feedback! We will process it as soon as possible.",
        responseTime:
          "We typically reply within 1-2 business days. For urgent issues, please contact us via email directly.",
      },
      language: {
        title: "Language",
        cn: "ä¸­æ–‡",
        en: "English",
      },
      activity: {
        distance: "Distance",
        steps: "Steps",
        energy: "Energy",
        pace: "Pace",
        runs: "Runs",
        hours: "Hours",
      },
      unit: {
        km: "km",
        mi: "mi",
        kcal: "kcal",
        hours: "h",
        minutes: "min",
        seconds: "s",
        spm: "spm",
      },
      time: {
        week: ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"],
        months: [
          "Jan",
          "Feb",
          "Mar",
          "Apr",
          "May",
          "Jun",
          "Jul",
          "Aug",
          "Sep",
          "Oct",
          "Nov",
          "Dec",
        ],
      },
    },
  },
  cn: {
    translation: {
      common: {
        today: "ä»Šå¤©",
        yesterday: "æ˜¨å¤©",
        time: "æ—¶é—´",
        error: "é”™è¯¯",
        cancel: "å–æ¶ˆ",
        saving: "ä¿å­˜ä¸­...",
        save: "ä¿å­˜",
        loading: "åŠ è½½ä¸­",
        start: "å¼€å§‹",
        back: "è¿”å›",
        optional: "é€‰å¡«",
        success: "æˆåŠŸ",
        greeting: {
          morning: "æ—©ä¸Šå¥½",
          afternoon: "ä¸‹åˆå¥½",
          evening: "æ™šä¸Šå¥½",
        },
      },
      tabs: {
        index: "é¦–é¡µ",
        history: "è®°å½•",
        charts: "å›¾è¡¨",
        user: "æˆ‘çš„",
      },
      weather: {
        sunny: "æ™´æœ—",
        cloudy: "å¤šäº‘",
        overcast: "é˜´å¤©",
        comfortable: "èˆ’é€‚",
        breezy: "å¾®é£",
        windy: "æœ‰é£",
        hot: "ç‚çƒ­",
        cold: "å¯’å†·",
        warm: "æ¸©æš–",
        cool: "å‡‰çˆ½",
        humid: "æ½®æ¹¿",
        dry: "å¹²ç‡¥",
        hazy: "æœ¦èƒ§",
        foggy: "æœ‰é›¾",
        showery: "é˜µé›¨",
        stormy: "é›·æš´",
        mild: "æ¸©å’Œ",
        fresh: "æ¸…æ–°",
      },
      login: {
        title: "åœ¨è¿™é‡Œç™»é™†",
        registerTitle: "åˆ›å»ºè´¦æˆ·",
        registerDescription: "åˆ›å»ºä¸€ä¸ªå¸æˆ·ï¼Œä»¥ä¾¿æ‚¨å¯ä»¥æ¢ç´¢æ‰€æœ‰ç°æœ‰çš„åŠŸèƒ½",
        welcome: "æ¬¢è¿å›æ¥ï¼Œæˆ‘ä»¬éƒ½å¾ˆæƒ³å¿µä½ ï¼",
        account: "è´¦å·",
        password: "å¯†ç ",
        confirmPassword: "ç¡®è®¤å¯†ç ",
        forgetPassword: "å¿˜è®°å¯†ç ?",
        createAccount: "åˆ›å»ºæ–°è´¦å·",
        haveAccount: "å·²æœ‰è´¦æˆ·",
        continue: "å…¶ä»–æ–¹å¼ç™»é™†",
        login: "ç™»é™†",
        register: "æ³¨å†Œ",
        confirmPasswordError: "ä¸¤æ¬¡å¯†ç ä¸ä¸€è‡´",
      },
      home: {
        todayActivity: "ä»Šæ—¥æ´»åŠ¨",
        completeness: "ç›®æ ‡å®Œæˆåº¦",
        duration: "è¿åŠ¨æ—¶é•¿",
        calories: "è¿åŠ¨æ¶ˆè€—",
        pace: "å¹³å‡é…é€Ÿ",
        stepFrequency: "å¹³å‡æ­¥é¢‘",
        totalDistance: "æ€»å…¬é‡Œ",
        totalHours: "æ€»æ—¶é•¿",
        totalRuns: "æ€»æ¬¡æ•°",
        startRun: "å¼€å§‹è·‘æ­¥",
        career: "ç”Ÿæ¶¯ç´¯è®¡",
        recentActivities: "æœ€è¿‘æ´»åŠ¨",
        showMore: "æŸ¥çœ‹å…¨éƒ¨",
      },
      charts: {
        title: "è¿åŠ¨ç»Ÿè®¡",
        sinceDate: "è‡³ä»Š",
        weeklyDistance: "æœ¬å‘¨é‡Œç¨‹",
        totalCalories: "æ€»æ¶ˆè€—",
        avgPace: "å¹³å‡é…é€Ÿ",
        weekly: "å‘¨",
        monthly: "æœˆ",
        yearly: "å¹´",
        dailyDistance: "æ¯æ—¥è·‘é‡ (km)",
        weeklyTrend: "æœ¬å‘¨ç´¯è®¡è¶‹åŠ¿",
        dailyCalories: "å¡è·¯é‡Œæ¶ˆè€— (kcal)",
        caloriesBurned: "æ¯æ—¥çƒ­é‡ç‡ƒçƒ§",
      },
      history: {
        outdoorRun: "æˆ·å¤–è·‘æ­¥",
        noRecords: "æš‚æ— è®°å½•",
        emptyTitle: "è¿˜æ²¡æœ‰è·‘æ­¥è®°å½•",
        emptySubtitle: "è¿ˆå¼€ç¬¬ä¸€æ­¥ï¼Œå¼€å§‹è®°å½•ä½ çš„æ¯ä¸€æ¬¡å¥”è·‘å§ï¼ğŸƒâ€â™‚ï¸",
        startRun: "å¼€å§‹ç¬¬ä¸€æ¬¡è·‘æ­¥",
      },
      emptyState: {
        title: "è¿˜æ²¡æœ‰è·‘æ­¥è®°å½•",
        subtitle: "è¿ˆå¼€ç¬¬ä¸€æ­¥ï¼Œå¼€å§‹è®°å½•ä½ çš„æ¯ä¸€æ¬¡å¥”è·‘å§ï¼ğŸƒâ€â™‚ï¸",
        feature1: "è®°å½•è·‘æ­¥è½¨è¿¹",
        feature2: "è¿½è¸ªä¸ªäººè¿›æ­¥",
        feature3: "åˆ†æè¿åŠ¨æ•°æ®",
        action: "å¼€å§‹ç¬¬ä¸€æ¬¡è·‘æ­¥",
      },
      run: {
        summary: "è·‘æ­¥æ€»ç»“",
        detail: "è·‘æ­¥è¯¦æƒ…",
        start: "å¼€å§‹",
        finish: "ç»“æŸ",
        pause: "æš‚åœ",
        resume: "ç»§ç»­",
        paused: "å·²æš‚åœ",
        discard: "æ”¾å¼ƒ",
        discardTitle: "æ”¾å¼ƒæœ¬æ¬¡è·‘æ­¥?",
        discardMessage: "æœ¬æ¬¡è·‘æ­¥æ•°æ®å°†ä¸ä¼šè¢«ä¿å­˜ï¼Œç¡®å®šæ”¾å¼ƒå—ï¼Ÿ",
        discardRecord: "æ”¾å¼ƒè®°å½•",
        saveRecord: "ä¿å­˜è®°å½•",
        editInfo: "ç¼–è¾‘ä¿¡æ¯",
        info: "è·‘æ­¥ä¿¡æ¯",
        addNote: "æ·»åŠ å¤‡æ³¨...",
        noNote: "æš‚æ— å¤‡æ³¨",
        duration: "è¿åŠ¨æ—¶é•¿",
        steps: "æ­¥æ•°",
        signal: "ä¿¡å·å¼ºåº¦",
        notFound: "æœªæ‰¾åˆ°è·‘æ­¥è®°å½•",
        exportTitle: "å¯¼å‡ºè·‘æ­¥æ•°æ®",
        exportMessage: "é€‰æ‹©å¯¼å‡ºæ ¼å¼",
        exportError: "å¯¼å‡ºè·‘æ­¥æ•°æ®å¤±è´¥ï¼Œè¯·é‡è¯•",
      },
      setting: {
        language: "è¯­è¨€/Language",
        darkMode: "æ·±è‰²æ¨¡å¼",
        editProfile: "ç¼–è¾‘èµ„æ–™",
        map: "åœ°å›¾è®¾ç½®",
        cloudSync: "äº‘ç«¯åŒæ­¥",
        cloudSyncValue: "iCloud",
        notify: "æ¶ˆæ¯é€šçŸ¥",
        helps: "å¸®åŠ©ä¸åé¦ˆ",
        about: "å…³äºæˆ‘ä»¬",
        logout: "é€€å‡ºç™»å½•",
        preferences: "åå¥½è®¾ç½®",
        tools: "è·‘æ­¥å·¥å…·",
        other: "å…¶ä»–",
      },
      cloudSync: {
        title: "äº‘ç«¯åŒæ­¥",
        syncing: "æ­£åœ¨åŒæ­¥...",
        restoring: "æ­£åœ¨æ¢å¤...",
        syncSuccess: "åŒæ­¥æˆåŠŸ",
        syncFailed: "åŒæ­¥å¤±è´¥",
        synced: "å·²åŒæ­¥",
        notSynced: "æœªåŒæ­¥",
        lastSync: "ä¸Šæ¬¡åŒæ­¥",
        backupTime: "å¤‡ä»½æ—¶é—´",
        upload: "ç«‹å³å¤‡ä»½",
        restore: "æ¢å¤æ•°æ®",
        restoreTitle: "æ¢å¤æ•°æ®",
        restoreConfirm: "è¿™å°†ç”¨äº‘ç«¯å¤‡ä»½è¦†ç›–å½“å‰è®¾å¤‡ä¸Šçš„æ‰€æœ‰æ•°æ®ã€‚ç¡®å®šè¦ç»§ç»­å—ï¼Ÿ",
        restoreSuccess: "æ¢å¤æˆåŠŸ",
        restoreSuccessMessage: "æ•°æ®å·²æˆåŠŸæ¢å¤ï¼Œè¯·é‡å¯åº”ç”¨ä»¥åº”ç”¨æ›´æ”¹ã€‚",
        syncSettings: "åŒæ­¥è®¾ç½®",
        autoSync: "è‡ªåŠ¨åŒæ­¥",
        autoSyncDesc: "è·‘æ­¥ç»“æŸåè‡ªåŠ¨å¤‡ä»½",
        wifiOnly: "ä»… WiFi åŒæ­¥",
        wifiOnlyDesc: "èŠ‚çœç§»åŠ¨æ•°æ®æµé‡",
        storageInfo: "å­˜å‚¨ä¿¡æ¯",
        databaseSize: "æ•°æ®åº“å¤§å°",
        backupSize: "å¤‡ä»½å¤§å°",
        cloudProvider: "äº‘æœåŠ¡",
        tips: "å¤‡ä»½æ–‡ä»¶å­˜å‚¨åœ¨ iCloud ä¸­ï¼Œå¯åœ¨æ›´æ¢è®¾å¤‡æ—¶æ¢å¤æ•°æ®ã€‚iCloud å¤‡ä»½é€šå¸¸åœ¨è®¾å¤‡å……ç”µä¸”è¿æ¥ WiFi æ—¶è‡ªåŠ¨è¿›è¡Œã€‚",
      },
      mapSettings: {
        title: "åœ°å›¾è®¾ç½®",
        mapTypeTitle: "åœ°å›¾ç±»å‹",
        mapType: {
          standard: "æ ‡å‡†",
          satellite: "å«æ˜Ÿ",
          hybrid: "æ··åˆ",
        },
        displayOptions: "æ˜¾ç¤ºé€‰é¡¹",
        showUserLocation: "æ˜¾ç¤ºå½“å‰ä½ç½®",
        showUserLocationDesc: "åœ¨åœ°å›¾ä¸Šæ˜¾ç¤ºæ‚¨çš„ä½ç½®",
        followUserLocation: "è·Ÿéšä½ç½®",
        followUserLocationDesc: "åœ°å›¾è‡ªåŠ¨è·Ÿéšæ‚¨çš„ç§»åŠ¨",
        showCompass: "æ˜¾ç¤ºæŒ‡å—é’ˆ",
        showCompassDesc: "åœ¨åœ°å›¾ä¸Šæ˜¾ç¤ºæ–¹å‘",
        showScale: "æ˜¾ç¤ºæ¯”ä¾‹å°º",
        showScaleDesc: "æ˜¾ç¤ºåœ°å›¾æ¯”ä¾‹å°º",
        tiltEnabled: "3D å€¾æ–œè§†è§’",
        tiltEnabledDesc: "å¼€å¯ååœ°å›¾å‘ˆå€¾æ–œè§†è§’ï¼ˆ45åº¦ï¼‰",
        showTraffic: "æ˜¾ç¤ºäº¤é€šçŠ¶å†µ",
        showTrafficDesc: "åœ¨åœ°å›¾ä¸Šæ˜¾ç¤ºå®æ—¶äº¤é€šä¿¡æ¯",
        showPOI: "æ˜¾ç¤ºå…´è¶£ç‚¹",
        showPOIDesc: "æ˜¾ç¤ºå•†åº—ã€é¤å…ç­‰åœ°ç‚¹æ ‡è®°",
        interaction: "äº¤äº’è®¾ç½®",
        zoomEnabled: "å…è®¸ç¼©æ”¾",
        zoomEnabledDesc: "åŒæŒ‡æåˆç¼©æ”¾åœ°å›¾",
        rotateEnabled: "å…è®¸æ—‹è½¬",
        rotateEnabledDesc: "åŒæŒ‡æ—‹è½¬åœ°å›¾æ–¹å‘",
        scrollEnabled: "å…è®¸å¹³ç§»",
        scrollEnabledDesc: "å•æŒ‡æ‹–åŠ¨ç§»åŠ¨åœ°å›¾",
        pitchEnabled: "å…è®¸å€¾æ–œ",
        pitchEnabledDesc: "åŒæŒ‡ä¸Šä¸‹æ»‘åŠ¨æ”¹å˜è§†è§’å€¾æ–œ",
        pathStyle: "è·¯å¾„æ ·å¼",
        pathColorTitle: "è·¯å¾„é¢œè‰²",
        pathColor: {
          blue: "è“è‰²",
          red: "çº¢è‰²",
          green: "ç»¿è‰²",
          orange: "æ©™è‰²",
          purple: "ç´«è‰²",
        },
        pathWidthTitle: "è·¯å¾„ç²—ç»†",
        pathWidth: {
          2: "ç»†",
          4: "æ ‡å‡†",
          6: "ç²—",
          8: "ç‰¹ç²—",
        },
        other: "å…¶ä»–",
        reset: "æ¢å¤é»˜è®¤è®¾ç½®",
        tips: "è¿™äº›è®¾ç½®å°†å½±å“è·‘æ­¥æ—¶çš„åœ°å›¾æ˜¾ç¤ºæ•ˆæœ",
      },
      about: {
        title: "å…³äºæˆ‘ä»¬",
        slogan: "æ‚¨æœ€å¥½çš„è·‘æ­¥ä¼´ä¾£",
        versionInfo: "ç‰ˆæœ¬ä¿¡æ¯",
        version: "ç‰ˆæœ¬å·",
        buildNumber: "æ„å»ºå·",
        updateCheck: "æ£€æŸ¥æ›´æ–°",
        legal: "æ³•å¾‹ä¿¡æ¯",
        privacyPolicy: "éšç§æ”¿ç­–",
        termsOfService: "ç”¨æˆ·åè®®",
        openSource: "å¼€æºè®¸å¯",
        team: "å…³äº SimRun",
        description:
          "SimRun æ˜¯ä¸€æ¬¾ä¸“ä¸ºçƒ­çˆ±æˆ·å¤–è¿åŠ¨çš„è·‘è€…è®¾è®¡çš„ä¸“ä¸šè·‘æ­¥è®°å½•åº”ç”¨ã€‚æˆ‘ä»¬è‡´åŠ›äºæä¾›ç²¾å‡†çš„è½¨è¿¹è®°å½•å’Œè¯¦ç»†çš„æ•°æ®åˆ†æï¼Œå¸®åŠ©æ‚¨æ›´å¥½åœ°äº†è§£è‡ªå·±çš„è·‘æ­¥è¡¨ç°ã€‚",
        allRightsReserved: "ç‰ˆæƒæ‰€æœ‰",
      },
      help: {
        title: "å¸®åŠ©ä¸åé¦ˆ",
        quickActions: "å¿«é€Ÿæ“ä½œ",
        contactUs: "è”ç³»æˆ‘ä»¬",
        userGuide: "ä½¿ç”¨æŒ‡å—",
        userGuideDesc: "äº†è§£å¦‚ä½•ä½¿ç”¨ SimRun",
        faq: {
          title: "å¸¸è§é—®é¢˜",
          gps: {
            question: "ä¸ºä»€ä¹ˆæˆ‘çš„ GPS è½¨è¿¹ä¸å‡†ç¡®ï¼Ÿ",
            answer:
              "GPS ç²¾åº¦å—ç¯å¢ƒå½±å“ã€‚è¯·åœ¨å¼€é˜”åœ°å¸¦è·‘æ­¥ï¼Œé¿å…é«˜æ¥¼æˆ–èŒ‚å¯†æ ‘æœ¨é®æŒ¡ã€‚æ‚¨ä¹Ÿå¯ä»¥å°è¯•é‡æ–°å¼€å…³ GPS æˆ–é‡å¯æ‰‹æœºã€‚",
          },
          background: {
            question: "å¯ä»¥åå°è®°å½•å—ï¼Ÿ",
            answer:
              'æ˜¯çš„ï¼ŒSimRun æ”¯æŒåå°è®°å½•ã€‚è¯·åœ¨è®¾ç½®ä¸­å…è®¸"å§‹ç»ˆ"ä½ç½®æƒé™ï¼Œä»¥ç¡®ä¿é”å±æ—¶æŒç»­è¿½è¸ªã€‚',
          },
          battery: {
            question: "è®°å½•ä¼šæ¶ˆè€—å¾ˆå¤šç”µé‡å—ï¼Ÿ",
            answer:
              "GPS è®°å½•ç¡®å®ä¼šæ¶ˆè€—ç”µé‡ã€‚å»ºè®®é•¿è·‘å‰å……æ»¡ç”µï¼Œæˆ–å¼€å¯çœç”µæ¨¡å¼ã€‚æˆ‘ä»¬å·²å°½å¯èƒ½ä¼˜åŒ–ç”µæ± ä½¿ç”¨ã€‚",
          },
          export: {
            question: "å¦‚ä½•å¯¼å‡ºè·‘æ­¥æ•°æ®ï¼Ÿ",
            answer:
              "è¿›å…¥è·‘æ­¥è®°å½•ï¼Œé€‰æ‹©æŸæ¡è®°å½•ï¼Œç‚¹å‡»åˆ†äº«æŒ‰é’®å¯å¯¼å‡º GPX æ–‡ä»¶ï¼Œå¯å¯¼å…¥å…¶ä»–è¿åŠ¨ Appã€‚",
          },
        },
        feedback: {
          title: "å‘é€åé¦ˆ",
          desc: "é‡åˆ°é—®é¢˜æˆ–æœ‰å»ºè®®ï¼Ÿå‘Šè¯‰æˆ‘ä»¬ï¼",
          email: "æ‚¨çš„é‚®ç®±",
          content: "åé¦ˆå†…å®¹",
          placeholder: "è¯·è¯¦ç»†æè¿°æ‚¨çš„é—®é¢˜æˆ–å»ºè®®...",
          submit: "æäº¤åé¦ˆ",
        },
        feedbackEmpty: "è¯·è¾“å…¥åé¦ˆå†…å®¹",
        feedbackSent: "æ„Ÿè°¢æ‚¨çš„åé¦ˆï¼æˆ‘ä»¬ä¼šå°½å¿«å¤„ç†ã€‚",
        responseTime:
          "æˆ‘ä»¬é€šå¸¸ä¼šåœ¨ 1-2 ä¸ªå·¥ä½œæ—¥å†…å›å¤ã€‚ç´§æ€¥é—®é¢˜è¯·ç›´æ¥é‚®ä»¶è”ç³»ã€‚",
      },
      language: {
        title: "è¯­è¨€è®¾ç½®",
        cn: "ä¸­æ–‡",
        en: "English",
      },
      activity: {
        distance: "è·ç¦»",
        steps: "å¹³å‡æ­¥é¢‘",
        energy: "è¿åŠ¨æ¶ˆè€—",
        pace: "å¹³å‡é…é€Ÿ",
        runs: "è·‘æ­¥æ•°",
        hours: "æ€»æ—¶é•¿",
      },
      unit: {
        kcal: "åƒå¡",
        km: "å…¬é‡Œ",
        mi: "ç±³",
        hours: "å°æ—¶",
        minutes: "åˆ†",
        seconds: "ç§’",
        spm: "æ­¥/åˆ†",
      },
      time: {
        week: ["å‘¨ä¸€", "å‘¨äºŒ", "å‘¨ä¸‰", "å‘¨å››", "å‘¨äº”", "å‘¨å…­", "å‘¨æ—¥"],
        months: [
          "1æœˆ",
          "2æœˆ",
          "3æœˆ",
          "4æœˆ",
          "5æœˆ",
          "6æœˆ",
          "7æœˆ",
          "8æœˆ",
          "9æœˆ",
          "10æœˆ",
          "11æœˆ",
          "12æœˆ",
        ],
      },
    },
  },
};

// ä» settings å­˜å‚¨ä¸­è·å–è¯­è¨€
const getLanguageFromSettings = async (): Promise<string | null> => {
  try {
    const stored = await getStorageItemAsync(SETTINGS_STORAGE_KEY) as string | null;
    if (stored) {
      const parsed = JSON.parse(stored);
      return parsed.language || null;
    }
  } catch (error) {
    console.error("Failed to get language from settings:", error);
  }
  return null;
};

// åˆå§‹åŒ– i18n
const initI18n = async () => {
  // é¦–å…ˆå°è¯•ä»æ–°çš„ settings å­˜å‚¨è¯»å–
  let savedLang = await getLanguageFromSettings();

  // å¦‚æœæ²¡æ‰¾åˆ°ï¼Œå°è¯•æ—§ keyï¼ˆå…¼å®¹æ—§ç‰ˆæœ¬ï¼‰
  if (!savedLang) {
    savedLang = await getStorageItemAsync("app-language") as string | null;
  }

  i18n.use(initReactI18next).init({
    resources,
    lng: savedLang || "cn",
    interpolation: {
      escapeValue: false, // react already safes from xss
    },
  });
};

initI18n();

export default i18n;
